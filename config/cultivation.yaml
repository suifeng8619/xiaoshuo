# 仙侠修炼系统配置

# ==================== 境界系统 ====================
realms:
  # 凡人境界
  - id: mortal
    name: 凡人
    sub_realms: ["未入门"]
    base_hp: 100
    base_mp: 50
    base_attack: 10
    base_defense: 5
    exp_to_next: 100

  - id: qi_refining
    name: 炼气期
    sub_realms: ["一层", "二层", "三层", "四层", "五层", "六层", "七层", "八层", "九层"]
    base_hp: 200
    base_mp: 150
    base_attack: 30
    base_defense: 15
    exp_to_next: 500
    multiplier_per_sub: 1.15

  - id: foundation
    name: 筑基期
    sub_realms: ["前期", "中期", "后期", "大圆满"]
    base_hp: 500
    base_mp: 400
    base_attack: 100
    base_defense: 50
    exp_to_next: 2000
    multiplier_per_sub: 1.25

  - id: golden_core
    name: 金丹期
    sub_realms: ["前期", "中期", "后期", "大圆满"]
    base_hp: 1500
    base_mp: 1200
    base_attack: 300
    base_defense: 150
    exp_to_next: 8000
    multiplier_per_sub: 1.3

  - id: nascent_soul
    name: 元婴期
    sub_realms: ["前期", "中期", "后期", "大圆满"]
    base_hp: 5000
    base_mp: 4000
    base_attack: 1000
    base_defense: 500
    exp_to_next: 30000
    multiplier_per_sub: 1.35

  - id: soul_formation
    name: 化神期
    sub_realms: ["前期", "中期", "后期", "大圆满"]
    base_hp: 15000
    base_mp: 12000
    base_attack: 3000
    base_defense: 1500
    exp_to_next: 100000
    multiplier_per_sub: 1.4

  - id: void_refinement
    name: 炼虚期
    sub_realms: ["前期", "中期", "后期", "大圆满"]
    base_hp: 50000
    base_mp: 40000
    base_attack: 10000
    base_defense: 5000
    exp_to_next: 500000
    multiplier_per_sub: 1.45

  - id: integration
    name: 合体期
    sub_realms: ["前期", "中期", "后期", "大圆满"]
    base_hp: 200000
    base_mp: 150000
    base_attack: 35000
    base_defense: 18000
    exp_to_next: 2000000
    multiplier_per_sub: 1.5

  - id: mahayana
    name: 大乘期
    sub_realms: ["前期", "中期", "后期", "大圆满"]
    base_hp: 800000
    base_mp: 600000
    base_attack: 120000
    base_defense: 60000
    exp_to_next: 10000000
    multiplier_per_sub: 1.6

  - id: tribulation
    name: 渡劫期
    sub_realms: ["一重天劫", "二重天劫", "三重天劫", "四重天劫", "五重天劫", "六重天劫", "七重天劫", "八重天劫", "九重天劫"]
    base_hp: 3000000
    base_mp: 2500000
    base_attack: 500000
    base_defense: 250000
    exp_to_next: 50000000
    multiplier_per_sub: 1.8

# ==================== 基础属性 ====================
attributes:
  # 一级属性（玩家可分配点数）
  primary:
    - id: strength
      name: 力量
      description: 影响物理攻击力和负重
      effects:
        attack: 2.0          # 每点增加2攻击
        carry_weight: 5.0    # 每点增加5负重

    - id: agility
      name: 敏捷
      description: 影响速度、闪避和暴击
      effects:
        speed: 1.5
        dodge_rate: 0.002    # 每点增加0.2%闪避
        crit_rate: 0.001     # 每点增加0.1%暴击

    - id: constitution
      name: 体质
      description: 影响生命值和物理防御
      effects:
        hp: 10.0
        defense: 1.0
        hp_regen: 0.5        # 每点增加0.5生命回复/秒

    - id: spirit
      name: 神识
      description: 影响法力值和法术伤害
      effects:
        mp: 8.0
        spell_power: 1.5
        mp_regen: 0.3

    - id: perception
      name: 悟性
      description: 影响修炼速度和技能领悟
      effects:
        exp_bonus: 0.01      # 每点增加1%经验获取
        skill_learn_rate: 0.02

    - id: luck
      name: 气运
      description: 影响掉落、奇遇和炼丹成功率
      effects:
        drop_rate: 0.005
        encounter_rate: 0.003
        alchemy_success: 0.005

  # 二级属性（由一级属性和装备计算）
  derived:
    - id: hp
      name: 生命
      base_from: constitution

    - id: mp
      name: 法力
      base_from: spirit

    - id: attack
      name: 攻击
      base_from: strength

    - id: defense
      name: 防御
      base_from: constitution

    - id: speed
      name: 速度
      base_from: agility

    - id: crit_rate
      name: 暴击率
      base_from: agility
      cap: 0.75            # 上限75%

    - id: crit_damage
      name: 暴击伤害
      default: 1.5         # 基础150%暴击伤害
      cap: 5.0

    - id: dodge_rate
      name: 闪避率
      base_from: agility
      cap: 0.60            # 上限60%

# ==================== 五行系统 ====================
elements:
  - id: metal
    name: 金
    strong_against: wood    # 金克木
    weak_against: fire      # 火克金
    color: "#FFD700"

  - id: wood
    name: 木
    strong_against: earth
    weak_against: metal
    color: "#228B22"

  - id: water
    name: 水
    strong_against: fire
    weak_against: earth
    color: "#1E90FF"

  - id: fire
    name: 火
    strong_against: metal
    weak_against: water
    color: "#FF4500"

  - id: earth
    name: 土
    strong_against: water
    weak_against: wood
    color: "#8B4513"

element_damage_bonus: 0.3   # 克制时额外30%伤害
element_damage_reduction: 0.2  # 被克制时减少20%伤害

# ==================== 战斗公式 ====================
combat:
  # 基础伤害 = 攻击力 * 技能倍率 - 防御力 * 减伤系数
  damage_formula:
    skill_multiplier_default: 1.0
    defense_factor: 0.5     # 防御力的50%用于减伤
    min_damage_percent: 0.1 # 最低造成10%基础伤害

  # 暴击伤害 = 基础伤害 * 暴击伤害倍率
  crit:
    base_multiplier: 1.5

  # 闪避判定
  dodge:
    base_chance: 0.05       # 基础5%闪避
    level_penalty: 0.02     # 每高一个大境界，闪避率-2%

  # 速度影响出手顺序
  speed:
    initiative_formula: "speed + random(1, 20)"

# ==================== Buff系统 ====================
buff_types:
  - id: dot          # 持续伤害
    name: 持续伤害
    stackable: true
    max_stacks: 5

  - id: hot          # 持续治疗
    name: 持续回复
    stackable: true
    max_stacks: 3

  - id: stat_boost   # 属性提升
    name: 属性增益
    stackable: false

  - id: stat_debuff  # 属性降低
    name: 属性削弱
    stackable: false

  - id: control      # 控制效果
    name: 控制
    stackable: false

  - id: shield       # 护盾
    name: 护盾
    stackable: true
    max_stacks: 3

# ==================== 物品品质 ====================
item_quality:
  - id: common
    name: 凡品
    color: "#FFFFFF"
    stat_multiplier: 1.0

  - id: uncommon
    name: 灵品
    color: "#1EFF00"
    stat_multiplier: 1.3

  - id: rare
    name: 玄品
    color: "#0070FF"
    stat_multiplier: 1.7

  - id: epic
    name: 地品
    color: "#A335EE"
    stat_multiplier: 2.2

  - id: legendary
    name: 天品
    color: "#FF8000"
    stat_multiplier: 3.0

  - id: mythic
    name: 仙品
    color: "#FF0000"
    stat_multiplier: 5.0

  - id: divine
    name: 神品
    color: "#FFD700"
    stat_multiplier: 10.0

# ==================== 技能类型 ====================
skill_types:
  - id: active
    name: 主动技能
    requires_mp: true
    has_cooldown: true

  - id: passive
    name: 被动技能
    always_active: true

  - id: ultimate
    name: 神通
    requires_mp: true
    has_cooldown: true
    long_cooldown: true

# ==================== 装备槽位 ====================
equipment_slots:
  - id: weapon
    name: 武器/法宝
    max_count: 1

  - id: head
    name: 头部
    max_count: 1

  - id: body
    name: 身体
    max_count: 1

  - id: legs
    name: 腿部
    max_count: 1

  - id: feet
    name: 足部
    max_count: 1

  - id: accessory
    name: 饰品
    max_count: 2

  - id: storage
    name: 储物袋
    max_count: 1
