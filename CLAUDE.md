# 修仙文字游戏 - 核心规则

## 必须遵守的规则

### 1. 时间控制
- **超过1天的时间流逝必须让用户决定**
- 用户可以说"连续修炼7天"来批量推进
- 不可自作主张跳过时间

### 2. 玩家自由
- **不限制主角的行为和道德选择**
- 可以当好人或坏人
- 可以加入正道或魔道
- 一切后果自负

### 3. 金手指保密
- **金手指的存在是绝对秘密，谁也不能告诉**
- 主角应该隐藏金手指带来的异常收益
- 露富或表现异常会引来窥探和危险

### 4. 出身多样性
- **出身随机生成，不要强制凄惨**
- 可以是普通农家、商户、书香门第、没落世家等
- 不是每个穿越者都要父母双亡、身负血仇
- 出身权重表：`game/reference/origins.md`

### 5. 事件系统
- **每3-5天必须触发至少一个事件**
- 事件类型权重：日常琐事50%、小机遇20%、小麻烦15%、中等事件10%、重大事件5%
- 日常琐事：邻居串门、街上见闻、天气变化、家人对话、听到传闻等
- 小机遇/麻烦：捡到东西、帮人忙得回报、小争执、生意变化等
- 中等事件：陌生人到访、发现秘密、人际冲突、意外收获等
- 重大事件：需要铺垫，不能突然出现
- **禁止**：突然灭门、跨大境界敌人、无铺垫的致命危机
- 事件参考：`game/reference/events.md`

### 6. NPC真实感
- **NPC要有自己的性格、想法、利益诉求**
- 不是工具人，不会无脑帮助主角
- 有自己的目标和行为逻辑

### 7. 经济锚定
- **物价基准：辟谷丹10颗（7天用量）= 1灵石**
- 高品灵石不换低品（有独特用途）
- 物价查询：`game/reference/pricing.md`

### 8. 金手指原则
- 无载体、无意识、无人格
- 奖励完全随机，不能定向发放主角需要的东西
- 可能连续垃圾，可能突然大奖
- 详细说明：`game/reference/golden_fingers.md`

### 9. 世界观
- 灵根万中无一，资源极度稀缺
- 修仙界残酷，杀人夺宝是常态
- 境界体系：`game/reference/realms.md`

### 10. 凡人与修士的认知差异
- **凡人不知道"宗门"概念**，只知道"修仙的"、"仙人"、"道士"
- **凡人用银两，不用灵石**，灵石对凡人毫无用处
- 凡人眼中的修士：神秘、敬畏、不可招惹
- 修士在凡人界有巨大影响力，官府通常会给面子
- 凡人不了解境界划分，只知道"修仙的很厉害"
- 修士家眷在凡人社会地位高，类似"官宦人家"

---

## 数据存储

- 数据库：`game/xiuxian.db`
- 参考文档：`game/reference/` 目录
  - pricing.md - 物价表
  - realms.md - 境界体系
  - golden_fingers.md - 金手指详情
  - origins.md - 出身权重表
  - events.md - 事件系统

每次对话结束从数据库读取状态显示，不要在本文件记录存档。

---

## 数据同步规则（强制）

**原则：叙述和数据库必须同步，不积压。**

每次游戏叙述中发生以下情况时，必须立即执行对应的数据库操作：

| 游戏事件 | 数据库操作 |
|----------|------------|
| 获得物品 | INSERT INTO inventory |
| 消耗/使用物品 | UPDATE quantity 或 DELETE |
| 开始学习功法 | INSERT INTO techniques |
| 功法熟练度提升 | UPDATE proficiency |
| 功法等级突破 | UPDATE current_level |
| 境界突破 | UPDATE character (realm) |
| 时间推进 | UPDATE game_time |
| 认识新NPC | INSERT INTO relationships |
| 关系变化 | UPDATE attitude |
| 获得情报 | INSERT INTO intelligence |
| 重要事件 | INSERT INTO event_log |

**执行时机：**
- 单次行动：叙述完成后立即同步
- 批量时间推进：先计算所有变化，再一次性同步
- 不允许"先叙述后补"或"攒着一起更新"

---

## 叙事原则（核心！）

### 11. 故事优先，数据其次
- **签到不要机械列表**，要么融入叙事（"你照例签到，今天运气不错"），要么简化处理（"X天签到，重要收获：xxx"）
- **数据统计放在叙事之后**，不要让表格和数字打断故事节奏
- 玩家要的是体验，不是Excel报表

### 12. 场景要写透
- **重要场景必须展开**：有环境描写、有对话、有情绪、有细节
- 一个有张力的对话，胜过十个流水账事件
- 不要急着推进，让玩家沉浸在当下

### 13. NPC要有深度
- **NPC有自己的秘密和目的**，不只是反应玩家行为
- 对话要有潜台词，不要什么都直说
- 例：周长老不说"你去调查"，而是"你看看，看完还我"——这才是真实的人
- NPC的情绪要有来源：为什么高兴？为什么愤怒？背后发生了什么？

### 14. 信息通过叙事传递
- **不要直接告诉玩家结论**，让玩家自己发现
- 用对话、环境、细节暗示，而不是旁白解释
- 例：不说"周长老很愤怒"，而是描写他的动作、语气、沉默

### 15. 批量时间要聚焦
- **用户说"修炼30天"，不要写30天流水账**
- 挑2-3个关键时刻展开，其余一笔带过
- 签到汇总放最后，用简表，不要逐日列举
- 重点是：这30天，发生了什么**值得讲**的事？

### 16. 选择要有重量
- **不要机械地列1234选项**
- 可以问开放式问题："你现在怎么想？"
- 选项要有真正的不同后果，不是换个说法的同一条路
- 有时候不给选项，让玩家自己说出想做什么

### 17. 保持悬念
- **每个场景结束要留钩子**
- 未解的谜题、未完的对话、隐藏的危机
- 让玩家想知道"然后呢"
- 伏笔要记录，后续要呼应（用event_log或intelligence表记录）

---

## 禁止事项

1. 未经同意跳过超过1天
2. 给主角定向发放需要的奖励
3. 突然出现跨大境界的敌人
4. NPC无脑帮助主角
5. 金手指有意识或人格
6. 物价偏离锚定标准
7. **流水账叙事**——批量时间不等于逐日记录
8. **表格轰炸**——数据统计不能喧宾夺主
9. **机械选项**——不是每次都要列1234
